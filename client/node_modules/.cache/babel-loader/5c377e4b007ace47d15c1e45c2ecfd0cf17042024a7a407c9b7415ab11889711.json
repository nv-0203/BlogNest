{"ast":null,"code":"var _jsxFileName = \"/Users/nufailvhora/Desktop/Projects/BlogNest/client/src/pages/EditProfile.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Navigate, useParams } from \"react-router-dom\";\nimport './Form.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditProfile() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [displayName, setDisplayName] = useState('');\n  const [about, setAbout] = useState('');\n  const [profilePicture, setProfilePicture] = useState(null);\n  const [files, setFiles] = useState('');\n  const [redirect, setRedirect] = useState(false);\n  useEffect(() => {\n    fetchProfileInfo();\n  }, []);\n  function fetchProfileInfo() {\n    fetch(`${config.API_URL}/profile/${id}`).then(response => response.json()).then(data => {\n      if (data.error) {\n        console.error(data.error);\n        return;\n      }\n      setDisplayName(data.user.displayName);\n      setAbout(data.user.about);\n    }).catch(error => {\n      console.error('Error fetching profile:', error);\n    });\n  }\n  async function updateProfile(ev) {\n    ev.preventDefault();\n    const data = new FormData();\n    data.set('displayName', displayName);\n    data.set('about', about);\n    data.set('id', id);\n    if (files !== null && files !== void 0 && files[0]) {\n      data.set('file', files === null || files === void 0 ? void 0 : files[0]);\n    }\n    const response = await fetch(`${config.API_URL}/profile/${id}`, {\n      method: 'PUT',\n      body: data,\n      credentials: 'include'\n    });\n    if (response.ok) {\n      setRedirect(true);\n    }\n  }\n  if (redirect) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: '/profile/' + id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"auth-form\",\n    onSubmit: updateProfile,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Update Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Display Name\",\n      value: displayName,\n      onChange: ev => setDisplayName(ev.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"About you (max 250 words)\",\n      value: about,\n      onChange: ev => setAbout(ev.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: ev => setFiles(ev.target.files)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Update\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(EditProfile, \"ss6dKJB7nN7i1ZFO+hhoy/6vdkw=\", false, function () {\n  return [useParams];\n});\n_c = EditProfile;\nvar _c;\n$RefreshReg$(_c, \"EditProfile\");","map":{"version":3,"names":["useEffect","useState","Navigate","useParams","jsxDEV","_jsxDEV","EditProfile","_s","id","displayName","setDisplayName","about","setAbout","profilePicture","setProfilePicture","files","setFiles","redirect","setRedirect","fetchProfileInfo","fetch","config","API_URL","then","response","json","data","error","console","user","catch","updateProfile","ev","preventDefault","FormData","set","method","body","credentials","ok","to","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","children","type","placeholder","value","onChange","target","_c","$RefreshReg$"],"sources":["/Users/nufailvhora/Desktop/Projects/BlogNest/client/src/pages/EditProfile.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {Navigate, useParams} from \"react-router-dom\";\nimport './Form.css';\n\nexport default function EditProfile() {\n  const {id} = useParams();\n  const [displayName, setDisplayName] = useState('');\n  const [about, setAbout] = useState('');\n  const [profilePicture, setProfilePicture] = useState(null);\n  const [files, setFiles] = useState('');\n  const [redirect,setRedirect] = useState(false);\n\n  useEffect(() => {\n    fetchProfileInfo();\n  }, []);\n\n  function fetchProfileInfo() {\n    fetch(`${config.API_URL}/profile/${id}`)\n      .then(response => response.json())\n      .then(data => {\n        if (data.error) {\n          console.error(data.error);\n          return;\n        }\n        setDisplayName(data.user.displayName);\n        setAbout(data.user.about);\n      })\n      .catch(error => {\n        console.error('Error fetching profile:', error);\n      });\n  }\n\n  async function updateProfile(ev) {\n    ev.preventDefault();\n    const data = new FormData();\n    data.set('displayName', displayName);\n    data.set('about', about);\n    data.set('id', id);\n    if (files?.[0]) {\n      data.set('file', files?.[0]);\n    }\n    const response = await fetch(`${config.API_URL}/profile/${id}`, {\n      method: 'PUT',\n      body: data,\n      credentials: 'include',\n    });\n    if (response.ok) {\n      setRedirect(true);\n    }\n  }\n\n  if (redirect) {\n    return <Navigate to={'/profile/'+id} />\n  }\n\n  return (\n    <form className=\"auth-form\" onSubmit={updateProfile}>\n        <h1>Update Profile</h1>\n        <input \n        type=\"text\"\n        placeholder=\"Display Name\"\n        value={displayName}\n        onChange={ev => setDisplayName(ev.target.value)} \n      />\n      <textarea\n        placeholder=\"About you (max 250 words)\"\n        value={about}\n        onChange={ev => setAbout(ev.target.value)}\n      />\n      <input\n        type=\"file\"\n        onChange={ev => setFiles(ev.target.files)}\n      />\n      <button>Update</button>\n    </form>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}